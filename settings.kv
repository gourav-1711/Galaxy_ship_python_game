#: import dp kivy.metrics.dp

<ColorSwatch@Button>:
    size_hint: None, None
    size: "36dp", "36dp"
    background_normal: ""
    background_color: 0, 0, 0, 0
    border_color: 0.5, 0.5, 0.6, 0.6
    swatch_color: [1, 1, 1, 1]
    selected: False
    canvas.before:
        # Selection ring
        Color:
            rgba: (0.35, 0.4, 1, 1) if self.selected else (0.4, 0.4, 0.5, 0.3)
        Line:
            ellipse: (self.x - dp(2), self.y - dp(2), self.width + dp(4), self.height + dp(4))
            width: 2 if self.selected else 1
        # Color circle
        Color:
            rgba: self.swatch_color
        Ellipse:
            pos: self.x + dp(3), self.y + dp(3)
            size: self.width - dp(6), self.height - dp(6)


<SettingsScreen>:
    opacity: 0

    # Back button — top left
    Button:
        text: "<  Back"
        font_size: "16dp"
        bold: True
        size_hint: None, None
        size: "90dp", "36dp"
        pos_hint: {"x": 0.03, "top": 0.95}
        color: 0.7, 0.75, 1, 1
        background_color: 0, 0, 0, 0
        background_normal: ""
        on_press: root.go_back()

    # Main content container
    BoxLayout:
        orientation: "vertical"
        size_hint: 0.75, 0.88
        pos_hint: {"center_x": 0.5, "center_y": 0.47}
        spacing: "8dp"

        # Title
        Label:
            text: "S E T T I N G S"
            font_size: "36dp"
            font_name: "assets/fonts/Sackers-Gothic-Std-Light.ttf"
            bold: True
            color: 1, 1, 1, 1
            size_hint_y: 0.18
            halign: "center"
            valign: "bottom"
            text_size: self.size

        # Blue accent line
        Widget:
            size_hint_y: None
            height: "3dp"
            canvas:
                Color:
                    rgba: 0.2, 0.3, 1, 1
                RoundedRectangle:
                    pos: self.center_x - dp(60), self.y
                    size: dp(120), dp(3)
                    radius: [2]

        # Spacer
        Widget:
            size_hint_y: 0.05

        # ─── LINES COLOR ───
        Label:
            text: "Lines Color"
            font_size: "18dp"
            bold: True
            color: 0.8, 0.82, 0.95, 1
            size_hint_y: 0.08
            halign: "center"
            valign: "middle"
            text_size: self.size

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "42dp"
            spacing: "14dp"
            padding: [dp(0), dp(3), dp(0), dp(3)]
            pos_hint: {"center_x": 0.5}

            Widget:
                size_hint_x: 1
            ColorSwatch:
                swatch_color: [1, 1, 1, 1]
                selected: root.parent.lines_color == [1, 1, 1, 1]
                on_press: root.set_lines_color(0)
            ColorSwatch:
                swatch_color: [0, 0.9, 1, 1]
                selected: root.parent.lines_color == [0, 0.9, 1, 1]
                on_press: root.set_lines_color(1)
            ColorSwatch:
                swatch_color: [1, 0.2, 0.6, 1]
                selected: root.parent.lines_color == [1, 0.2, 0.6, 1]
                on_press: root.set_lines_color(2)
            ColorSwatch:
                swatch_color: [0.3, 1, 0.3, 1]
                selected: root.parent.lines_color == [0.3, 1, 0.3, 1]
                on_press: root.set_lines_color(3)
            ColorSwatch:
                swatch_color: [1, 0.85, 0.2, 1]
                selected: root.parent.lines_color == [1, 0.85, 0.2, 1]
                on_press: root.set_lines_color(4)
            ColorSwatch:
                swatch_color: [1, 0.45, 0.3, 1]
                selected: root.parent.lines_color == [1, 0.45, 0.3, 1]
                on_press: root.set_lines_color(5)
            Widget:
                size_hint_x: 1

        # Spacer
        Widget:
            size_hint_y: 0.03

        # ─── TILES COLOR ───
        Label:
            text: "Tiles Color"
            font_size: "18dp"
            bold: True
            color: 0.8, 0.82, 0.95, 1
            size_hint_y: 0.08
            halign: "center"
            valign: "middle"
            text_size: self.size

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "42dp"
            spacing: "14dp"
            padding: [dp(0), dp(3), dp(0), dp(3)]
            pos_hint: {"center_x": 0.5}

            Widget:
                size_hint_x: 1
            ColorSwatch:
                swatch_color: [1, 1, 1, 1]
                selected: root.parent.tiles_color == [1, 1, 1, 1]
                on_press: root.set_tiles_color(0)
            ColorSwatch:
                swatch_color: [0, 0.9, 1, 1]
                selected: root.parent.tiles_color == [0, 0.9, 1, 1]
                on_press: root.set_tiles_color(1)
            ColorSwatch:
                swatch_color: [1, 0.2, 0.6, 1]
                selected: root.parent.tiles_color == [1, 0.2, 0.6, 1]
                on_press: root.set_tiles_color(2)
            ColorSwatch:
                swatch_color: [0.3, 1, 0.3, 1]
                selected: root.parent.tiles_color == [0.3, 1, 0.3, 1]
                on_press: root.set_tiles_color(3)
            ColorSwatch:
                swatch_color: [1, 0.85, 0.2, 1]
                selected: root.parent.tiles_color == [1, 0.85, 0.2, 1]
                on_press: root.set_tiles_color(4)
            ColorSwatch:
                swatch_color: [1, 0.45, 0.3, 1]
                selected: root.parent.tiles_color == [1, 0.45, 0.3, 1]
                on_press: root.set_tiles_color(5)
            Widget:
                size_hint_x: 1

        # Spacer
        Widget:
            size_hint_y: 0.03

        # ─── SHIP COLOR ───
        Label:
            text: "Ship Color"
            font_size: "18dp"
            bold: True
            color: 0.8, 0.82, 0.95, 1
            size_hint_y: 0.08
            halign: "center"
            valign: "middle"
            text_size: self.size

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "42dp"
            spacing: "14dp"
            padding: [dp(0), dp(3), dp(0), dp(3)]
            pos_hint: {"center_x": 0.5}

            Widget:
                size_hint_x: 1
            ColorSwatch:
                swatch_color: [1, 1, 1, 1]
                selected: root.parent.ship_color == [1, 1, 1, 1]
                on_press: root.set_ship_color(0)
            ColorSwatch:
                swatch_color: [0, 0.9, 1, 1]
                selected: root.parent.ship_color == [0, 0.9, 1, 1]
                on_press: root.set_ship_color(1)
            ColorSwatch:
                swatch_color: [1, 0.2, 0.6, 1]
                selected: root.parent.ship_color == [1, 0.2, 0.6, 1]
                on_press: root.set_ship_color(2)
            ColorSwatch:
                swatch_color: [0.3, 1, 0.3, 1]
                selected: root.parent.ship_color == [0.3, 1, 0.3, 1]
                on_press: root.set_ship_color(3)
            ColorSwatch:
                swatch_color: [1, 0.85, 0.2, 1]
                selected: root.parent.ship_color == [1, 0.85, 0.2, 1]
                on_press: root.set_ship_color(4)
            ColorSwatch:
                swatch_color: [1, 0.45, 0.3, 1]
                selected: root.parent.ship_color == [1, 0.45, 0.3, 1]
                on_press: root.set_ship_color(5)
            Widget:
                size_hint_x: 1

        # Bottom spacer
        Widget:
            size_hint_y: 0.08
